<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

    <link rel="icon" href="https://images.emojiterra.com/google/noto-emoji/unicode-15/color/1024px/1f9d1-1f4bb.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/style.css">
    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous">
    </script>
    <script>
    $(function(){
      $("#header").load("header.html");
    });
  </script>
</head>
<body onLoad="fetchJSONData(['gpt-4', 'gpt-4-turbo', 'claude-3'])">

<div id="header"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // some default stuff
    Chart.defaults.font.family = 'Roboto Condensed';
    function fetchJSONData(models) {
        fetch("./data.json")
            .then((res) => {
                if (!res.ok) {
                    throw new Error
                        (`HTTP error! Status: ${res.status}`);
                }
                return res.json();
            })
            .then((data) => {
                draw_chart(models, data);
            })
            .catch((error) =>
                   console.error("Unable to fetch data:", error));
    }

    function draw_chart(models, model_data) {
      var ctx = document.getElementById('myChart');

      var dataset_labels = ['HumanEval', 'Difficult', 'Creative', 'Subtle', 'Combine', 'Tool Use'];
      var graph_data = []
      for (var i = 0; i < model_data.length; i++) {
          if (models.includes(model_data[i].name)) {
              graph_data.push(
                  {label: model_data[i].name,
                   data:  [model_data[i].humaneval, model_data[i].EvoEval_difficult, model_data[i].EvoEval_creative, model_data[i].EvoEval_subtle, model_data[i].EvoEval_combine, model_data[i].EvoEval_tool_use],
                   fill: true
                  });
          }
      }

      var data = {
      labels: dataset_labels,
      datasets: graph_data
    };

      new Chart(ctx, {
       type: 'radar',
      data: data,
      options: {
        elements: {
          line: {
            borderWidth: 3
          }
        },
        scales: {
            r: {
                suggestedMin: 0.2,
                suggestedMax: 1
            }
        },
          plugins: {
            legend: {
                labels: {
                    font: {
                        size: 15,
                        family: 'Roboto Condensed'
                    }
                }
            }
        }
      }
      });
        }
</script>

<div class="container">
    <canvas id="myChart"></canvas>
</div>

</body>
</html>